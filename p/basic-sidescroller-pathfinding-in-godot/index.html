<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="How I did it for my train game"><title>Basic Sidescroller pathfinding in godot</title><link rel=canonical href=https://blog.leahdevs.xyz/p/basic-sidescroller-pathfinding-in-godot/><link rel=stylesheet href=/scss/style.min.6a692fd055deae459f2a9767f57f3855ba80cafd5041317f24f7360f6ca47cdf.css><meta property='og:title' content="Basic Sidescroller pathfinding in godot"><meta property='og:description' content="How I did it for my train game"><meta property='og:url' content='https://blog.leahdevs.xyz/p/basic-sidescroller-pathfinding-in-godot/'><meta property='og:site_name' content='Leahs Blog'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:published_time' content='2024-11-10T18:00:00+02:00'><meta property='article:modified_time' content='2026-02-03T22:56:00+01:00'><meta property='og:image' content='https://blog.leahdevs.xyz/p/basic-sidescroller-pathfinding-in-godot/cover.webp'><meta name=twitter:title content="Basic Sidescroller pathfinding in godot"><meta name=twitter:description content="How I did it for my train game"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content='https://blog.leahdevs.xyz/p/basic-sidescroller-pathfinding-in-godot/cover.webp'></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_a0eb31b3f9745f54.png width=300 height=308 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>üè≥Ô∏è‚Äç‚ößÔ∏è</span></figure><div class=site-meta><h1 class=site-name><a href=/>Leahs Blog</a></h1><h2 class=site-description>My personal blog :3</h2></div></header><ol class=menu-social><li><a href=https://github.com/ChaoticLeah target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li><a href=/links/><svg class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg>
<span>Links</span></a></li><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#a-bit-of-backstory-on-the-project>A bit of backstory on the project</a></li><li><a href=#the-quick-answer>The quick answer</a></li><li><a href=#so-how-do-i-have-public-and-private-rooms>So how do I have public and private rooms?</a></li><li><a href=#some-more-detail>Some more detail</a></li><li><a href=#how-are-new-nodes-linked>How are new nodes linked?</a><ol><li><a href=#edge-cases>Edge cases</a></li></ol></li><li><a href=#debugging>Debugging</a></li><li><a href=#future-optimizations>Future optimizations</a></li></ol></nav></div></section></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/p/basic-sidescroller-pathfinding-in-godot/><img src=/p/basic-sidescroller-pathfinding-in-godot/cover_hu_b1b1a5a5dee31b5e.webp srcset="/p/basic-sidescroller-pathfinding-in-godot/cover_hu_b1b1a5a5dee31b5e.webp 800w, /p/basic-sidescroller-pathfinding-in-godot/cover_hu_1ae0bc7b7b278f36.webp 1600w" width=800 height=188 loading=lazy alt="Featured image of post Basic Sidescroller pathfinding in godot"></a></div><div class=article-details><header class=article-category><a href=/categories/programming/ style=background-color:#fc76cf;color:#fff>Programming</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/basic-sidescroller-pathfinding-in-godot/>Basic Sidescroller pathfinding in godot</a></h2><h3 class=article-subtitle>How I did it for my train game</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Nov 10, 2024</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>5 minute read</time></div></footer><div class=article-time>Views:<div id=stats data-stats=https://blog.leahdevs.xyz/p/basic-sidescroller-pathfinding-in-godot/>‚àû</div></div><script>function addView(e){var t=new XMLHttpRequest;t.open("POST","https://views.leahdevs.xyz/api/increment/"+encodeURIComponent(e)),t.send(),loadViews(e)}function loadViews(e){var t=new XMLHttpRequest;t.addEventListener("load",function(){document.querySelector(`[data-stats='https://blog.leahdevs.xyz/p/basic-sidescroller-pathfinding-in-godot/']`).innerText=JSON.parse(this.responseText).count}),t.open("GET","https://views.leahdevs.xyz/api/"+encodeURIComponent(e)),t.send()}(function(){const t=location.pathname.includes("/p/")?location.pathname.split("/p/")[1].split("/")[0]:location.pathname,e="https://blog.leahdevs.xyz/p/basic-sidescroller-pathfinding-in-godot/".split("/p/")[1].split("/")[0];t===e?addView(e):loadViews(e)})()</script></div></header><section class=article-content><h2 id=a-bit-of-backstory-on-the-project>A bit of backstory on the project</h2><p>I am making a game where you build up a hotel on a train. You get customers at each stop and they will use the things you place down. Each customer will get a room that only they (or their party) can go into. You can also place stuff in their rooms.</p><h2 id=the-quick-answer>The quick answer</h2><p>You might be wondering how pathfinding works in this game. I had to write a custom pathfinding solution since Godot does not support side-view pathfinding. The solution is actually quite simple. There is a pathfinding network made up of a bunch of connected nodes. Each NPC can navigate between nodes using the <a class=link href=https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm target=_blank rel=noopener>Dijkstra algorithm</a></p><h2 id=so-how-do-i-have-public-and-private-rooms>So how do I have public and private rooms?</h2><p>Nodes (the points that can be pathfinded to) have a property telling the game if it&rsquo;s a public or a private node. If it&rsquo;s private they will also have an allow list that saves all the allowed NPCs that can use it. If an NPC tries to pathfind to (or through) a private node that doesnt have it whitelisted then the pathfinder will fail. In this case the inside door node is whitelisted so people can still walk past the room, but only specific NPCS can come in the room. This is enough to make sure everyone else stays out and is flexible enough for me to allow for inviting friends over or whatever if such a feature is needed in the future.</p><p><img src=/p/basic-sidescroller-pathfinding-in-godot/image.png width=1090 height=263 srcset="/p/basic-sidescroller-pathfinding-in-godot/image_hu_682d943c6d269bd4.png 480w, /p/basic-sidescroller-pathfinding-in-godot/image_hu_30333149661fd647.png 1024w" loading=lazy alt="Some connected nodes visualised" class=gallery-image data-flex-grow=414 data-flex-basis=994px></p><h2 id=some-more-detail>Some more detail</h2><p>Pathfinding typically begins in one of two ways: either an NPC is wandering, or it is attempting to complete a task. When wandering, the NPC simply chooses a random point and attempts to pathfind to it.</p><style>.bg{background-color:#005b972f;color:#fff;padding:20px;padding-left:25px;padding-right:25px;border-radius:8px}.title{font-size:20px;margin-top:0;margin-bottom:10px;color:#00c2ff;font-weight:700}.title::before{content:"‚ÑπÔ∏è "}[data-scheme=light] .bg{color:#000}[data-scheme=light] .title{color:#004471}.bg.alert{background-color:#ff00002f;color:#fff4f4;.title { color: #ff0000; } .title::before { content: "üö® "; }}[data-scheme=light] .bg.alert{background-color:#ffc7c7;color:#420000;.title { color: #c30000; }}.bg.warning{background-color:#ffcc002f;color:#fffbeb;.title { color: #ffcc00; } .title::before { content: "‚ö†Ô∏è "; }}[data-scheme=light] .bg.warning{background-color:#f8ebb2;color:#312700;.title { color: #a88600; }}</style><div class=bg><p class=title>Note About Wandering</p><p>In the future I plan to rework this so that wandering uses a much simpler pathfinding solution because right now if the random point that is picked is in a room they can‚Äôt access; it will compute the path, fail, pick a new point, and keep doing this until it finds an ok point to go to. In the future, I plan to try adding some sort of noise to control how they move without any real pathfinding which should be way less expensive to compute.</p></div><p>When an NPC starts a task it probably needs to go somewhere. For example, if an NPC needs the bathroom it will search for the closest bathrooms and then rank them by how busy they are to try to avoid long lines. This encourages players to place more bathrooms to even out long lines. After a bathroom (or other buildable) is picked it will use the <a class=link href=https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm target=_blank rel=noopener>Dijkstra algorithm</a> to precompute the path it needs to take. Then it will slowly make its way there, and once there, its pathfinding will be done and the buildable will likely take over control of the NPC. In the case of the bathroom, the buildable will put them in line. If there is no line then they turn invisible (to the player it looks like they went inside of the bathroom) and then the bathroom does the rest of its job.</p><h2 id=how-are-new-nodes-linked>How are new nodes linked?</h2><p>When building new buildables its nodes are usually linked automatically. Each buildable has a pathfinding node on it so it will try to automatically register itself into the network and then find which 2 nodes it&rsquo;s between. After finding these 2 nodes, it will cut them apart so they are no longer linked. After that, it will link them to itself and vice versa (it‚Äôs a 2-way link. Yes this pathfinding system supports 1-way pathfinding but the auto registering doesn‚Äôt support it). For most buildables that‚Äôs the end of it, but there is 1 thing that breaks this: Stairs. Unlike every other buildable, it is not a buildable that will be used by the task system, and has 2 pathfinding nodes (A top and bottom node).</p><p><img src=/p/basic-sidescroller-pathfinding-in-godot/Stairs-Pathfinding-On.png width=303 height=269 srcset="/p/basic-sidescroller-pathfinding-in-godot/Stairs-Pathfinding-On_hu_e04dfd7f5a3208aa.png 480w, /p/basic-sidescroller-pathfinding-in-godot/Stairs-Pathfinding-On_hu_b697d3a9ff79c2c4.png 1024w" loading=lazy alt="Some stairs with their pathfinding nodes and connections visualised. The numbers represent the number of connections of each node." class=gallery-image data-flex-grow=112 data-flex-basis=270px></p><p>This is almost the same case as previously but I had to manually register the nodes since the auto register would unlink the 2. It‚Äôs also one of the few cases where 3 links will occur(which isnt supported by the auto-linking). It‚Äôs also the only case in my game where pathfinding goes up or down vertically so it‚Äôs marked a darker blue to signify that. For now, this doesn‚Äôt do much but could be used to trigger a custom walk animation, sound, or something else. On the topic of special nodes there is also a teleport node (which is used to link the outside of doors to the inside of doors which just teleports the npc from 1 node to the other since really the inside of the room is far under the rest of the train)</p><h3 id=edge-cases>Edge cases</h3><p>What happens when a node is deleted that an NPC is going to pathfind to? Its pathfinding will fail. This used to crash the game but now it shouldn&rsquo;t. If this happens it will fail the task and start over trying to find a new path there. If it was between points it would first navigate to the nearest point and then continue to pathfind.</p><h2 id=debugging>Debugging</h2><p>As you can see in the screenshot above, I have built some visual tools to help figure out how nodes are linked. This helped a great deal to ensure they were all linked right.</p><h2 id=future-optimizations>Future optimizations</h2><p>For example, right now when NPCs are looking for a bathroom, they will look for the nearest one that isn‚Äôt too crowded. This sounds good on paper but if every room has a private bathroom in it, then it will try and fail many times before it finds a bathroom it can actually pathfind to. This is bad, especially if many NPCs do this since its very slow and causes lag. Originally I had this problem with beds too. In the future, I want to make it so that buildable pathfinding nodes will add themselves to a public list if they are in a public space. If they are not in a public space they won&rsquo;t be added. When an NPC needs to go to the bathroom, it will consider everything in the public list along with everything in any private rooms it has access to.</p></section><footer class=article-footer><section class=article-lastmod><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<span>Last updated on Feb 03, 2026 22:56 +0100</span></section></footer></article><a href=https://notbyai.fyi target=_blank><img src=/Written-By-a-Human-Not-By-AI-Badge-black.svg style=height:42px alt="Written by Human, Not by AI"></a><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article class=has-image><a href=/p/federated-blog-comments/><div class=article-image><img src=/p/federated-blog-comments/cover.d5f5b597e571b51bbe836cb0d3251566_hu_f58a9792090199db.png width=250 height=150 loading=lazy alt="Featured image of post Adding federated comments into my blog" data-key=federated-blog-comments data-hash="md5-1fW1l+VxtRu+g2yw0yUVZg=="></div><div class=article-details><h2 class=article-title>Adding federated comments into my blog</h2></div></a></article><article class=has-image><a href=/p/fixing-misskey-plugin-dev/><div class=article-image><img src=/p/fixing-misskey-plugin-dev/cover.c1580a0dce3143fdaa6ee54a5ac3fe12_hu_25e8d1262377fab8.png width=250 height=150 loading=lazy alt="Featured image of post Fixing the pains of Misskey plugin development" data-key=fixing-misskey-plugin-dev data-hash="md5-wVgKDc4xQ/2qbuVKWsP+Eg=="></div><div class=article-details><h2 class=article-title>Fixing the pains of Misskey plugin development</h2></div></a></article><article class=has-image><a href=/p/rewriting-the-cookcli-frontend/><div class=article-image><img src=/p/rewriting-the-cookcli-frontend/cover.ef23aae6be00e8e8f8f1c21b2035921e_hu_2dfbe98d59cb8c72.webp width=250 height=150 loading=lazy alt="Featured image of post Rewriting the CookCLI frontend" data-key=rewriting-the-cookcli-frontend data-hash="md5-7yOq5r4A6Oj48cIbIDWSHg=="></div><div class=article-details><h2 class=article-title>Rewriting the CookCLI frontend</h2></div></a></article><article class=has-image><a href=/p/simple-view-counter/><div class=article-image><img src=/p/simple-view-counter/image.0a78e6aef9be4f12fe9015518323e791_hu_3d8f249e133906c8.png width=250 height=150 loading=lazy alt="Featured image of post Releasing a KISS view counter" data-key=simple-view-counter data-hash="md5-Cnjmrvm+TxL+kBVRgyPnkQ=="></div><div class=article-details><h2 class=article-title>Releasing a KISS view counter</h2></div></a></article><article class=has-image><a href=/p/world-procgen-in-roblox/><div class=article-image><img src=/p/world-procgen-in-roblox/DDNight.875f3e82b76452c8431970277824f127_hu_90546dae68f46ee7.png width=250 height=150 loading=lazy alt="Featured image of post Procedural world generation in roblox" data-key=world-procgen-in-roblox data-hash="md5-h18+grdkUshDGXAneCTxJw=="></div><div class=article-details><h2 class=article-title>Procedural world generation in roblox</h2></div></a></article></div></div></aside><link rel=stylesheet href=/css/fedi-comments.css><script src=/js/fedi-comments.js defer></script><fedi-comments host=infosec.exchange id=116008862895014640></fedi-comments><footer class=site-footer><section class=copyright>&copy;
2024 -
2026 Leahs Blog</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>